<svg width="700" height="400" viewBox="0 0 700 400" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="700" height="400" fill="#FAFAFA" stroke="#E5E5E5" stroke-width="1" rx="8"/>
  
  <!-- Title -->
  <text x="350" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#1F2937">
    Keycloak - Active Directory Integration
  </text>
  
  <!-- Applications Section -->
  <g id="applications">
    <rect x="50" y="80" width="120" height="60" fill="#DBEAFE" stroke="#3B82F6" stroke-width="2" rx="8"/>
    <text x="110" y="105" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#1E40AF">Web Apps</text>
    <text x="110" y="120" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#1E40AF">OIDC/SAML</text>
    
    <rect x="50" y="160" width="120" height="60" fill="#DBEAFE" stroke="#3B82F6" stroke-width="2" rx="8"/>
    <text x="110" y="185" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#1E40AF">Mobile Apps</text>
    <text x="110" y="200" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#1E40AF">OAuth 2.0</text>
    
    <rect x="50" y="240" width="120" height="60" fill="#DBEAFE" stroke="#3B82F6" stroke-width="2" rx="8"/>
    <text x="110" y="265" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#1E40AF">Legacy Apps</text>
    <text x="110" y="280" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#1E40AF">SAML 2.0</text>
  </g>
  
  <!-- Keycloak Section -->
  <g id="keycloak">
    <rect x="290" y="140" width="140" height="120" fill="#FEF3C7" stroke="#F59E0B" stroke-width="3" rx="12"/>
    <text x="360" y="165" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#92400E">Keycloak</text>
    <text x="360" y="180" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#92400E">Identity Provider</text>
    
    <!-- Keycloak Components -->
    <rect x="300" y="190" width="50" height="25" fill="#FDE68A" stroke="#F59E0B" stroke-width="1" rx="4"/>
    <text x="325" y="207" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#92400E">Realms</text>
    
    <rect x="360" y="190" width="60" height="25" fill="#FDE68A" stroke="#F59E0B" stroke-width="1" rx="4"/>
    <text x="390" y="207" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#92400E">User Fed.</text>
    
    <rect x="300" y="225" width="50" height="25" fill="#FDE68A" stroke="#F59E0B" stroke-width="1" rx="4"/>
    <text x="325" y="242" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#92400E">SSO</text>
    
    <rect x="360" y="225" width="60" height="25" fill="#FDE68A" stroke="#F59E0B" stroke-width="1" rx="4"/>
    <text x="390" y="242" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#92400E">Roles</text>
  </g>
  
  <!-- Active Directory Section -->
  <g id="active-directory">
    <rect x="530" y="140" width="120" height="120" fill="#DCFCE7" stroke="#16A34A" stroke-width="2" rx="8"/>
    <text x="590" y="165" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#166534">Active Directory</text>
    <text x="590" y="180" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#166534">Domain Controller</text>
    
    <!-- AD Components -->
    <rect x="540" y="190" width="40" height="25" fill="#BBF7D0" stroke="#16A34A" stroke-width="1" rx="4"/>
    <text x="560" y="207" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#166534">Users</text>
    
    <rect x="590" y="190" width="50" height="25" fill="#BBF7D0" stroke="#16A34A" stroke-width="1" rx="4"/>
    <text x="615" y="207" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#166534">Groups</text>
    
    <rect x="540" y="225" width="40" height="25" fill="#BBF7D0" stroke="#16A34A" stroke-width="1" rx="4"/>
    <text x="560" y="242" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#166534">OUs</text>
    
    <rect x="590" y="225" width="50" height="25" fill="#BBF7D0" stroke="#16A34A" stroke-width="1" rx="4"/>
    <text x="615" y="242" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#166534">Policies</text>
  </g>
  
  <!-- Arrows and Connection Labels -->
  <!-- Apps to Keycloak -->
  <line x1="170" y1="110" x2="290" y2="180" stroke="#F97316" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="170" y1="190" x2="290" y2="200" stroke="#F97316" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="170" y1="270" x2="290" y2="220" stroke="#F97316" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Keycloak to AD -->
  <line x1="430" y1="200" x2="530" y2="200" stroke="#F97316" stroke-width="3" marker-end="url(#arrowhead)"/>
  <text x="480" y="195" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#EA580C">LDAPS/389</text>
  <text x="480" y="210" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#EA580C">User Federation</text>
  
  <!-- Protocol Labels -->
  <text x="200" y="105" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#F97316" transform="rotate(-20 200 105)">OIDC</text>
  <text x="200" y="185" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#F97316" transform="rotate(-5 200 185)">OAuth 2.0</text>
  <text x="200" y="265" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#F97316" transform="rotate(20 200 265)">SAML</text>
  
  <!-- Flow Labels -->
  <text x="100" y="340" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#1F2937">Authentication Flow:</text>
  <text x="100" y="355" font-family="Arial, sans-serif" font-size="10" fill="#6B7280">1. User → App → Keycloak</text>
  <text x="250" y="355" font-family="Arial, sans-serif" font-size="10" fill="#6B7280">2. Keycloak → LDAP → AD</text>
  <text x="400" y="355" font-family="Arial, sans-serif" font-size="10" fill="#6B7280">3. AD validates → Token issued</text>
  
  <!-- Arrow marker definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#F97316"/>
    </marker>
  </defs>
</svg>